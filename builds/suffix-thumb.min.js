!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((n="undefined"!=typeof globalThis?globalThis:n||self).suffixThumb={})}(this,(function(n){"use strict";function e(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==r)return;var t,o,u=[],i=!0,f=!1;try{for(r=r.call(n);!(i=(t=r.next()).done)&&(u.push(t.value),!e||u.length!==e);i=!0);}catch(n){f=!0,o=n}finally{try{i||null==r.return||r.return()}finally{if(f)throw o}}return u}(n,e)||function(n,e){if(!n)return;if("string"==typeof n)return r(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return r(n,e)}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(n,e){(null==e||e>n.length)&&(e=n.length);for(var r=0,t=new Array(e);r<e;r++)t[r]=n[r];return t}var t=function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=[],r=4;r>=0;r-=1)if(!(n.length-1<=r)){var t=n.substr(n.length-r-1,n.length-1);e.push(t)}return e},o=function(n){var e=[];return Object.keys(n).forEach((function(r){var t,o,u=(t=n[r],o=r,Object.keys(t).map((function(n){return{from:o,to:n,yes:t[n]}})).sort((function(n,e){return n.yes>e.yes?-1:n.yes<e.yes?1:0})));u[0]&&u[0].yes>1&&e.push(u[0])})),e=e.sort((function(n,e){return n.yes>e.yes?-1:n.yes<e.yes?1:0}))},u=function(n,e){var r=function(n,e){return n.map((function(n){var r=0,t=0,o={};return e.forEach((function(e){if(e[0].endsWith(n.from)){var u=new RegExp(n.from+"$");e[0].replace(u,n.to)===e[1]?r+=1:(t+=1,o[e[0]]=e[1])}})),{from:n.from,to:n.to,yes:r,no:t,percent:r/(r+t),exceptions:o}}))}(n,e);return r=(r=r.filter((function(n){return n.yes>1&&n.yes>n.no}))).sort((function(n,e){return n.yes>e.yes?-1:n.yes<e.yes?1:0}))};function i(n){return n.split("").reverse().join("")}var f=function(n){return(n=n.sort((function(n,e){return n.from.length>e.from.length?-1:n.from.length<e.from.length||(n=i(n.from))>(e=i(e.from))?1:n<e?-1:0}))).map((function(n){return[n.from,n.to,n.yes]}))},c=function(n){var r,i,c=function(n){var r={};return n.forEach((function(n){var o=e(n,2),u=o[0],i=o[1],f=t(u);f.push(""),f.forEach((function(n){r[n]=r[n]||{},t(i).forEach((function(e){r[n][e]=r[n][e]||0,r[n][e]+=1}))}))})),r}(n=n.filter((function(n){return n&&n[0]&&n[1]}))),s=o(c),a=u(s,n);return i={},(r=a).forEach((function(n,e){r.slice(e+1,r.length).forEach((function(e){e.from.endsWith(n.from)&&0===Object.keys(e.exceptions).length&&(i[e.from]=!0)}))})),function(n,e){var r={};n.forEach((function(n){Object.assign(r,n.exceptions)}));var t=e.filter((function(e){return!r.hasOwnProperty(e[0])&&!n.find((function(n){return e[0].endsWith(n.from)}))})),o=(e.length-t.length)/e.length;return{rules:f(n),exceptions:r,coverage:o,remaining:t}}(a=r=r.filter((function(n){return!1===i.hasOwnProperty(n.from)})),n)},s=function(n,e){var r,t=0;return n.rules=n.rules.map((function(n){return t+=n[2],n.slice(0,2)})),n.exceptions=n.exceptions.reduce((function(n,e){return n[e[0]]=e[1],n}),{}),n.rules=n.rules.sort((function(n,e){return n[0].length>e[0].length?1:n[0].length<e[0].length?-1:0})),n.coverage=(r=t/e,Math.round(10*r)/10),n};n.convert=function(n,e){if(e.exceptions.hasOwnProperty(n))return e.exceptions[n];for(var r=0;r<e.rules.length;r+=1){var t=e.rules[r][0];if(n.endsWith(t)){var o=new RegExp(t+"$");return n.replace(o,e.rules[r][1])}}return null},n.find=function(n){var e,r=n.length,t={rules:[],exceptions:[]};return e=c(n),t.rules=t.rules.concat(e.rules),n=e.remaining.concat(Object.entries(e.exceptions)),t.exceptions=e.remaining.concat(Object.entries(e.exceptions)),t=s(t,r)},Object.defineProperty(n,"__esModule",{value:!0})}));
