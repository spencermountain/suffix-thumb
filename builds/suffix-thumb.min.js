!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(n="undefined"!=typeof globalThis?globalThis:n||self).suffixThumb=r()}(this,(function(){"use strict";function n(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,r){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==t)return;var e,o,f=[],u=!0,i=!1;try{for(t=t.call(n);!(u=(e=t.next()).done)&&(f.push(e.value),!r||f.length!==r);u=!0);}catch(n){i=!0,o=n}finally{try{u||null==t.return||t.return()}finally{if(i)throw o}}return f}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return r(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);"Object"===e&&n.constructor&&(e=n.constructor.name);if("Map"===e||"Set"===e)return Array.from(n);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return r(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(n,r){(null==r||r>n.length)&&(r=n.length);for(var t=0,e=new Array(r);t<r;t++)e[t]=n[t];return e}var t=function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=[],t=4;t>=0;t-=1)if(!(n.length-1<=t)){var e=n.substr(n.length-t-1,n.length-1);r.push(e)}return r};function e(n){return n.split("").reverse().join("")}var o=function(n){return(n=n.sort((function(n,r){return n.from.length>r.from.length?-1:n.from.length<r.from.length||(n=e(n.from))>(r=e(r.from))?1:n<r?-1:0}))).map((function(n){return[n.from,n.to,n.yes]}))},f=function(r){var e={};return r.forEach((function(r){var o=n(r,2),f=o[0],u=o[1],i=t(f);i.push(""),i.forEach((function(n){e[n]=e[n]||{},t(u).forEach((function(r){e[n][r]=e[n][r]||0,e[n][r]+=1}))}))})),e},u=function(n){var r=[];return Object.keys(n).forEach((function(t){var e,o,f=(e=n[t],o=t,Object.keys(e).map((function(n){return{from:o,to:n,yes:e[n]}})).sort((function(n,r){return n.yes>r.yes?-1:n.yes<r.yes?1:0})));f[0]&&f[0].yes>1&&r.push(f[0])})),r=r.sort((function(n,r){return n.yes>r.yes?-1:n.yes<r.yes?1:0}))},i=function(n,r){var t=function(n,r){return n.map((function(n){var t=0,e=0,o={};return r.forEach((function(r){if(r[0].endsWith(n.from)){var f=new RegExp(n.from+"$");r[0].replace(f,n.to)===r[1]?t+=1:(e+=1,o[r[0]]=r[1])}})),{from:n.from,to:n.to,yes:t,no:e,percent:t/(t+e),exceptions:o}}))}(n,r);return t=(t=t.filter((function(n){return n.yes>1&&n.yes>n.no}))).sort((function(n,r){return n.yes>r.yes?-1:n.yes<r.yes?1:0}))},c=function(n){var r={};return n.forEach((function(t,e){n.slice(e+1,n.length).forEach((function(n){n.from.endsWith(t.from)&&(r[n.from]=!0)}))})),n=n.filter((function(n){return!1===r.hasOwnProperty(n.from)}))},a=function(n,r){var t={};n.forEach((function(n){Object.assign(t,n.exceptions)}));var e=r.filter((function(r){return!t.hasOwnProperty(r[0])&&!n.find((function(n){return r[0].endsWith(n.from)}))})),f=(r.length-e.length)/r.length;return{rules:o(n),exceptions:t,coverage:f,remaining:e}};return function(n){var r=f(n),t=u(r),e=i(t,n);return e=c(e),a(e,n)}}));
