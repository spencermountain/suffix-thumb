!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((n="undefined"!=typeof globalThis?globalThis:n||self).suffixThumb={})}(this,(function(n){"use strict";function r(n,r){return function(n){if(Array.isArray(n))return n}(n)||function(n,r){var e=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==e)return;var t,o,u=[],i=!0,f=!1;try{for(e=e.call(n);!(i=(t=e.next()).done)&&(u.push(t.value),!r||u.length!==r);i=!0);}catch(n){f=!0,o=n}finally{try{i||null==e.return||e.return()}finally{if(f)throw o}}return u}(n,r)||function(n,r){if(!n)return;if("string"==typeof n)return e(n,r);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return e(n,r)}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(n,r){(null==r||r>n.length)&&(r=n.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=n[e];return t}var t=function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=[],e=4;e>=0;e-=1)if(!(n.length-1<=e)){var t=n.substr(n.length-e-1,n.length-1);r.push(t)}return r},o=function(n){var r=[];return Object.keys(n).forEach((function(e){var t,o,u=(t=n[e],o=e,Object.keys(t).map((function(n){return{from:o,to:n,yes:t[n]}})).sort((function(n,r){return n.yes>r.yes?-1:n.yes<r.yes?1:0})));u[0]&&u[0].yes>1&&r.push(u[0])})),r=r.sort((function(n,r){return n.yes>r.yes?-1:n.yes<r.yes?1:0}))},u=function(n,r){var e=function(n,r){return n.map((function(n){var e=0,t=0,o={};return r.forEach((function(r){if(r[0].endsWith(n.from)){var u=new RegExp(n.from+"$");r[0].replace(u,n.to)===r[1]?e+=1:(t+=1,o[r[0]]=r[1])}})),{from:n.from,to:n.to,yes:e,no:t,percent:e/(e+t),exceptions:o}}))}(n,r);return e=(e=e.filter((function(n){return n.yes>1&&n.yes>n.no}))).sort((function(n,r){return n.yes>r.yes?-1:n.yes<r.yes?1:0}))};function i(n){return n.split("").reverse().join("")}var f=function(n){return(n=n.sort((function(n,r){return n.from.length>r.from.length?-1:n.from.length<r.from.length||(n=i(n.from))>(r=i(r.from))?1:n<r?-1:0}))).map((function(n){return[n.from,n.to,n.yes]}))},c=function(n){var e,i,c=function(n){var e={};return n.forEach((function(n){var o=r(n,2),u=o[0],i=o[1],f=t(u);f.push(""),f.forEach((function(n){e[n]=e[n]||{},t(i).forEach((function(r){e[n][r]=e[n][r]||0,e[n][r]+=1}))}))})),e}(n=n.filter((function(n){return n&&n[0]&&n[1]}))),s=o(c),a=u(s,n);return i={},(e=a).forEach((function(n,r){e.slice(r+1,e.length).forEach((function(r){r.from.endsWith(n.from)&&(i[r.from]=!0)}))})),function(n,r){var e={};n.forEach((function(n){Object.assign(e,n.exceptions)}));var t=r.filter((function(r){return!e.hasOwnProperty(r[0])&&!n.find((function(n){return r[0].endsWith(n.from)}))})),o=(r.length-t.length)/r.length;return{rules:f(n),exceptions:e,coverage:o,remaining:t}}(a=e=e.filter((function(n){return!1===i.hasOwnProperty(n.from)})),n)},s=function(n,r){var e,t=0;return n.rules=n.rules.map((function(n){return t+=n[2],n.slice(0,2)})),n.exceptions=n.exceptions.reduce((function(n,r){return n[r[0]]=r[1],n}),{}),n.rules=n.rules.sort((function(n,r){return n[0].length>r[0].length?-1:n[0].length<r[0].length?1:0})),n.coverage=(e=t/r,Math.round(1e3*e)/1e3),n};n.convert=function(n,r){if(r.exceptions.hasOwnProperty(n))return r.exceptions[n];for(var e=0;e<r.rules.length;e+=1){var t=r.rules[e][0];if(n.endsWith(t)){var o=new RegExp(t+"$");return n.replace(o,r.rules[e][1])}}return null},n.find=function(n){var r=n.length,e={},t=c(n);return e.rules=t.rules||[],e.exceptions=t.remaining.concat(Object.entries(t.exceptions)),e=s(e,r)},Object.defineProperty(n,"__esModule",{value:!0})}));
